{"version":3,"sources":["utils/Api.js","images/header__logo.svg","components/Header.js","components/Footer.js","images/Trash.svg","context/CurrentUserContext.js","components/Card.js","components/Main.js","components/PopupWithForm.js","components/AddCardPopup.js","components/EditProfilePopup.js","components/AvatarPopup.js","components/ImagePopup.js","components/Login.js","components/ProtectedRoute.js","components/Register.js","images/Deny.svg","images/Success.svg","components/InfoTooltip.js","utils/Auth.js","components/App.js","reportWebVitals.js","index.js"],"names":["api","baseUrl","headers","this","_baseUrl","_headers","res","ok","json","Promise","reject","status","fetch","then","_checkRequestResult","id","method","cardId","isLiked","likeCard","dislikeCard","name","link","body","JSON","stringify","about","av_link","avatar","authorization","Header","email","onSignOut","className","src","headerLogo","alt","exact","path","onClick","to","Footer","CurrentUserContext","React","createContext","Card","props","currentUser","useContext","isOwn","card","owner","_id","cardDeleteButtonClassName","likes","some","i","cardLikeButtonClassName","onCardClick","onCardDelete","trash","type","onCardLike","Main","onEditAvatar","onEditProfile","onAddPlace","cards","map","length","PopupWithForm","isOpen","onClose","title","noValidate","onSubmit","children","buttonText","AddCardPopup","useState","place","setPlace","setLink","useEffect","e","preventDefault","placeholder","minLength","maxLength","required","value","onChange","target","EditProfilePopup","setName","description","setDescription","onUpdateUser","AvatarPopup","ref","useRef","onUpdateAvatar","current","ImagePopup","Login","setEmail","password","setPassword","ProtectedRoute","Component","component","isLoggedIn","Register","InfoToolTip","isRegSucces","Success","Deny","BASE_URL","checkResponse","Error","App","isEditProfilePopupOpen","setIsEditProfilePopupOpen","isAddPlacePopupOpen","setIsAddPlacePopupOpen","isEditAvatarPopupOpen","setIsEditAvatarPopupOpen","isImagePopupOpen","setIsImagePopupOpen","selectedCard","setSelectedCard","setCurrentUser","setCards","history","useHistory","setIsLoggedIn","setIsRegSucces","isInfoPopupOpen","setIsInfoPopupOpen","overlayClick","evt","classList","contains","closeAllPopups","getUserData","user","catch","err","console","log","getInitialCards","window","addEventListener","key","jwt","localStorage","getItem","auth","data","push","Provider","removeItem","likeCardStatus","newCard","newCards","c","deleteCard","filter","setItem","token","overlay","postCard","updateUserData","updateAvatar","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.9c825eac.chunk.js","sourcesContent":["class Api {\n  constructor({ baseUrl, headers }) {\n    this._baseUrl = baseUrl;\n    this._headers = headers;\n  }\n\n  _checkRequestResult(res) {\n    if (res.ok) {\n      return res.json()\n    }\n    return Promise.reject(res.status)\n  }\n\n  getUserData() {\n    return fetch(`${this._baseUrl}/users/me`, {\n      headers: this._headers\n    })\n      .then(this._checkRequestResult)\n  }\n\n  getInitialCards() {\n    return fetch(`${this._baseUrl}/cards`, {\n      headers: this._headers\n    })\n      .then(this._checkRequestResult)\n  }\n\n\n  likeCard(id) {\n    return fetch(`${this._baseUrl}/cards/likes/${id}`, {\n      method: `PUT`,\n      headers: this._headers,\n    })\n      .then(this._checkRequestResult)\n  }\n\n  dislikeCard(cardId) {\n    return fetch(`${this._baseUrl}/cards/likes/${cardId}`, {\n        method: 'DELETE',\n        headers: this._headers,\n    })\n      .then((res) => this._checkRequestResult(res))\n  }\n\n  likeCardStatus(cardId, isLiked) {\n    return isLiked ? this.likeCard(cardId) : this.dislikeCard(cardId);\n  }\n\n  postCard(name, link) {\n    return fetch(`${this._baseUrl}/cards`, {\n      method: 'POST',\n      headers: this._headers,\n      body: JSON.stringify({\n        name: `${name}`,\n        link: `${link}`\n      })\n    })\n      .then(this._checkRequestResult)\n  }\n\n  deleteCard(id) {\n    return fetch(`${this._baseUrl}/cards/${id}`, {\n      method: `DELETE`,\n      headers: this._headers,\n    })\n      .then(this._checkRequestResult)\n  }\n\n  updateUserData(name, about) {\n    return fetch(`${this._baseUrl}/users/me`, {\n      method: 'PATCH',\n      headers: this._headers,\n      body: JSON.stringify({\n        name: `${name}`,\n        about: `${about}`\n      })\n    })\n      .then(this._checkRequestResult)\n  }\n\n  updateAvatar(av_link) {\n    return fetch(`${this._baseUrl}/users/me/avatar`, {\n      method: 'PATCH',\n      headers: this._headers,\n      body: JSON.stringify({\n        avatar: av_link,\n      }),\n    }).then(this._checkRequestResult);\n  }\n}\n\nconst api = new Api({\n  baseUrl: 'https://mesto.nomoreparties.co/v1/cohort-26',\n  headers: {\n      authorization: '46e8784b-6100-4cb8-864a-061229038de1',\n      'Content-Type': 'application/json',\n  }\n});\n\nexport default api;\n","export default __webpack_public_path__ + \"static/media/header__logo.6129e9de.svg\";","import headerLogo from '../images/header__logo.svg';\nimport {Link, Route} from \"react-router-dom\";\n\nfunction Header({email,onSignOut}) {\n  return (\n    <header className=\"header\">\n      <img src={headerLogo} alt=\"Логотип\" className=\"header__logo\" />\n      <div className=\"header__container\">\n        <Route exact path=\"/\">\n          <p className=\"header__email\">{email}</p>\n          <button className=\"header__link\" onClick={onSignOut}>Выйти</button>\n        </Route>\n        <Route exact path=\"/sign-in\">\n          <Link to=\"/sign-up\" className=\"header__link\">Регистрация</Link>\n        </Route>\n        <Route exact path=\"/sign-up\">\n          <Link to=\"/sign-in\" className=\"header__link\">Войти</Link>\n        </Route>\n      </div>\n    </header>\n  )\n}\n\nexport default Header;\n","function Footer() {\n  return(\n    <footer className=\"footer\">\n          <p className=\"footer__copyright\">&copy; 2020 Mesto Russia</p>\n    </footer>\n  )\n}\n\nexport default Footer;\n","export default __webpack_public_path__ + \"static/media/Trash.e3c42771.svg\";","import React from 'react';\n\nexport const CurrentUserContext = React.createContext();\n","import trash from '../images/Trash.svg';\nimport React from 'react';\nimport { CurrentUserContext } from '../context/CurrentUserContext';\n\nfunction Card(props) {\n\n  const currentUser = React.useContext(CurrentUserContext);\n\n  const isOwn = props.card.owner._id === currentUser._id;\n  const cardDeleteButtonClassName = (`card__trash ${isOwn ? 'card__trash': 'card__trash_hidden'}`);\n\n  const isLiked = props.card.likes.some(i => i._id === currentUser._id);\n  const cardLikeButtonClassName = (`card__like ${isLiked ? 'card__like_active' : ''}`);\n\n  const handleClick = () => {\n    props.onCardClick(props.card)\n  }\n\n  const handleLikeClick = () => {\n    props.onCardLike(props.card)\n  }\n\n  function handleDeleteClick() {\n    props.onCardDelete(props.card._id);\n  }\n\n  return(\n    <figure className=\"card\">\n      <img src={props.link} alt={props.name} className=\"card__image\" onClick={handleClick}/>\n      {isOwn && (\n        <button className={cardDeleteButtonClassName} onClick={handleDeleteClick}>\n          <img src={trash} alt=\"delete\"/>\n        </button>\n      )}\n      <figcaption className=\"card__description\">\n        <h2 className=\"card__title\">{props.name}</h2>\n        <div className=\"card__like-place\">\n          <button type=\"submit\" className={cardLikeButtonClassName} onClick={handleLikeClick}></button>\n          <span className=\"card__like-count\">{props.likes}</span>\n        </div>\n      </figcaption>\n    </figure>\n  )\n}\n\nexport default Card;\n","import React from \"react\";\nimport Card from \"./Card\";\nimport { CurrentUserContext } from \"../context/CurrentUserContext\";\n\nfunction Main(props) {\n\n  const currentUser = React.useContext(CurrentUserContext);\n\n  return(\n    <main className=\"container\">\n      <section className=\"profile\">\n        <div className=\"profile__avatar\">\n          <img src={currentUser ? currentUser.avatar : null} alt=\"Аватарка\" className=\"profile__image\" onClick={props.onEditAvatar} />\n        </div>\n        <div className=\"profile__info\">\n          <div className=\"profile__block\">\n            <h1 className=\"profile__name\">{currentUser ? currentUser.name : null}</h1>\n            <button type=\"button\" className=\"profile__edit-button\" onClick={props.onEditProfile}></button>\n          </div>\n          <p className=\"profile__description\">{currentUser ? currentUser.about : null}</p>\n        </div>\n        <button type=\"button\" className=\"profile__add-button\" onClick={props.onAddPlace}></button>\n      </section>\n      <section className=\"cards\">\n        {props.cards.map((card) => (\n          <Card\n          card={card}\n          key={card._id}\n          link={card.link}\n          name={card.name}\n          likes={card.likes.length}\n          onCardClick={props.onCardClick}\n          onCardLike={props.onCardLike}\n          onCardDelete={props.onCardDelete}\n          />\n        ))}\n      </section>\n    </main>\n  )\n}\n\nexport default Main;\n","import React from 'react';\n\nfunction PopupWithForm(props) {\n  return (\n    <article className={`popup popup_type_${props.name} ${props.isOpen ? 'popup_opened' : ' '} `} >\n      <div className=\"popup__container\">\n        <button onClick={props.onClose} type=\"button\" className={`popup__close popup__close_${props.name}`}></button>\n        <h2 className=\"popup__title\">{props.title}</h2>\n        <form name={`popup-form-${props.name}`} className={`popup__form popup__form_${props.name}`} noValidate onSubmit={props.onSubmit}>\n          <fieldset className=\"popup__field\">\n            {props.children}\n            <button type=\"submit\" className=\"popup__submit\">{props.buttonText}</button>\n          </fieldset>\n        </form>\n      </div>\n    </article>\n  )\n}\n\nexport default PopupWithForm;\n","import PopupWithForm from \"./PopupWithForm\";\nimport React, { useEffect } from 'react';\n\nfunction AddCardPopup(props) {\n\n  const[place, setPlace] = React.useState('');\n  const[link, setLink] = React.useState('');\n\n  function handleChangePlace(e) {\n    setPlace(e.target.value);\n  }\n\n  function handleChangeLink(e) {\n    setLink(e.target.value);\n  }\n\n  useEffect(() => {\n    setPlace('');\n    setLink('');\n  }, [props.isOpen])\n\n  function handleSubmit(e) {\n    e.preventDefault();\n    props.onAddPlace(place, link);\n  }\n\n  return (\n    <PopupWithForm name=\"add\" title=\"Новое место\" buttonText=\"Создать\" isOpen={props.isOpen} onClose={props.onClose} onSubmit={handleSubmit}>\n      <input id=\"placename\" className=\"popup__input\" type=\"text\" name=\"placename\" placeholder=\"Название\" minLength=\"2\" maxLength=\"30\" required\n        value={place}\n        onChange={handleChangePlace}/>\n      <span className=\"popup__input-error\" id=\"placename-error\"></span>\n      <input id=\"link\" className=\"popup__input\" type=\"url\" name=\"link\" placeholder=\"Ссылка на картинку\" required\n        value={link}\n        onChange={handleChangeLink}/>\n      <span className=\"popup__input-error\" id=\"link-error\"></span>\n    </PopupWithForm>\n  )\n}\n\nexport default AddCardPopup;\n","import PopupWithForm from \"./PopupWithForm\";\nimport React from 'react';\nimport {CurrentUserContext} from '../context/CurrentUserContext.js'\n\nfunction EditProfilePopup(props) {\n\n  const currentUser = React.useContext(CurrentUserContext);\n\n    const[name, setName] = React.useState('');\n    const[description, setDescription] = React.useState('');\n\n    function handleChangeName(e) {\n        setName(e.target.value)\n    }\n\n    function handleChangeDescription(e) {\n        setDescription(e.target.value)\n    }\n\n    React.useEffect(() => {\n      setName(currentUser ? currentUser.name : null);\n      setDescription(currentUser ? currentUser.about : null);\n    }, [currentUser, props.isOpen]);\n\n    function handleSubmit(e) {\n      e.preventDefault();\n      props.onUpdateUser(name, description);\n    }\n\n  return (\n    <PopupWithForm name=\"edit\" title=\"Редактировать профиль\" buttonText=\"Создать\" isOpen={props.isOpen} onClose={props.onClose} onSubmit={handleSubmit}>\n      <input id=\"name\" className=\"popup__input\" type=\"text\" name=\"username\" placeholder=\"Ваше имя\"  minLength=\"2\" maxLength=\"40\" required\n      value={name || ''}\n      onChange={handleChangeName}/>\n      <span className=\"popup__input-error\" id=\"name-error\"></span>\n      <input id=\"occupation\" className=\"popup__input\" type=\"text\" name=\"occupation\" placeholder=\"Род деятельности\"  minLength=\"2\" maxLength=\"200\" required\n      value={description || ''}\n      onChange={handleChangeDescription}/>\n      <span className=\"popup__input-error\" id=\"occupation-error\"></span>\n    </PopupWithForm>\n  )\n}\n\nexport default EditProfilePopup;\n","import PopupWithForm from \"./PopupWithForm\";\nimport React from 'react';\n\nfunction AvatarPopup(props) {\n\n  const ref = React.useRef('');\n\n    function handleSubmit(e) {\n        e.preventDefault();\n        props.onUpdateAvatar(ref.current.value);\n        ref.current.value = \"\";\n    }\n\n\n  return (\n    <PopupWithForm name=\"avatar\" title=\"Обновить аватар\" buttonText=\"Сохранить\" isOpen={props.isOpen} onClose={props.onClose} onSubmit={handleSubmit}>\n      <input ref= {ref} id=\"av_link\" className=\"popup__input\" type=\"url\" name=\"av_link\" placeholder=\"Ссылка на фото\"  minLength=\"2\" required />\n      <span className=\"popup__input-error\" id=\"av_link-error\"></span>\n    </PopupWithForm>\n  )\n}\n\nexport default AvatarPopup;\n","function ImagePopup(props) {\n  return(\n    <article className={`popup popup_type_image-overlay ${props.isOpen ? 'popup_opened' : ' '}`}>\n      <figure className=\"popup__figure\">\n        <button type=\"button\" className=\"popup__close popup__close_image\" onClick={props.onClose}></button>\n        <img src={props.link} alt=\"#\" className=\"popup__image\" />\n        <figcaption className=\"popup__caption\">{props.name}</figcaption>\n      </figure>\n    </article>\n  )\n}\n\nexport default ImagePopup;\n","import React from \"react\";\n\nfunction Login ({onSubmit}){\n  const [email, setEmail] = React.useState(\"\");\n  const [password, setPassword] = React.useState(\"\");\n  function handleEmailChange(e){\n      setEmail(e.target.value);\n  }\n\n  function handlePasswordChange(e){\n      setPassword(e.target.value);\n  }\n\n  function handleSubmit(e){\n      e.preventDefault();\n      onSubmit(email,password)\n  }\n\n  return(\n    <div className=\"authorization\">\n    <h2 className=\"authorization__title\">Вход</h2>\n    <form className=\"authorization__form\" name=\"login-form\" onSubmit={handleSubmit}>\n      <input required minLength=\"5\" onChange={handleEmailChange} value={email} maxLength=\"40\" type=\"email\" name=\"login-email\" placeholder=\"Email\" className=\"authorization__input\"/>\n      <input required minLength=\"5\" onChange={handlePasswordChange} value={password} maxLength=\"40\" type=\"password\" name=\"login-password\" placeholder=\"Пароль\"  className=\"authorization__input authorization__input_password\"/>\n      <button type=\"submit\" className=\"authorization__button\">Войти</button>\n    </form>\n    </div>\n  )\n}\n\nexport default Login;\n","import { Route, Redirect} from \"react-router-dom\";\n\nfunction ProtectedRoute({component: Component, ...props}){\n  return(\n    <Route>{\n      () => props.isLoggedIn ? <Component {...props}/> : <Redirect to=\"/sign-in\"/>\n    }\n    </Route>\n  )\n}\n\nexport default ProtectedRoute;\n","import React from \"react\";\nimport {Link} from \"react-router-dom\";\n\nfunction Register ({onSubmit}){\n    const [email, setEmail] = React.useState(\"\");\n    const [password, setPassword] = React.useState(\"\");\n    function handleEmailChange(e){\n        setEmail(e.target.value);\n\n    }\n    function handlePasswordChange(e){\n        setPassword(e.target.value);\n    }\n    function handleSubmit(e){\n        e.preventDefault();\n        onSubmit(email, password)\n    }\n    return(\n      <div className=\"authorization\">\n        <h2 className=\"authorization__title\">Регистрация</h2>\n        <form className=\"authorization__form\" name=\"register-form\" onSubmit={handleSubmit}>\n          <input required onChange={handleEmailChange} value={email}  minLength=\"5\" maxLength=\"40\" type=\"email\" name=\"register-email\" placeholder=\"Email\"  className=\"authorization__input\"/>\n          <input required onChange={handlePasswordChange} value={password} minLength=\"5\" maxLength=\"40\" type=\"password\" name=\"register-password\" placeholder=\"Пароль\"  className=\"authorization__input authorization__input_password\"/>\n          <button type=\"submit\" className=\"authorization__button\">Зарегистрироваться</button>\n          <Link className=\"authorization__login-link\" to=\"/sing-in\">Уже зарегистрированы? Войти</Link>\n        </form>\n      </div>\n    )\n}\n\nexport default Register;\n","export default __webpack_public_path__ + \"static/media/Deny.df8eddf6.svg\";","export default __webpack_public_path__ + \"static/media/Success.1b6082f8.svg\";","import Deny from \"../images/Deny.svg\";\nimport Success from \"../images/Success.svg\"\n\nfunction InfoToolTip({onClose, isOpen, isRegSucces}){\n  return(\n    <div className={`popup popup_type_view ${isOpen ? 'popup_opened' : ' '}`}>\n      <div className=\"popup__container\">\n      <button type=\"button\" aria-label=\"Закрыть\" className=\"popup__close popup__close_image\" onClick={onClose}></button>\n        <img src={isRegSucces ? Success : Deny} className=\"popup__info-icon\" alt=\"успех регистрации\"/>\n        <h2 className=\"popup__title-info\">{isRegSucces\n          ? `Вы успешно зарегистрировались!`\n          : `Что-то пошло не так! Попробуйте еще раз.`}\n        </h2>\n      </div>\n    </div>\n  )\n}\n\nexport default InfoToolTip;\n","const BASE_URL = 'https://auth.nomoreparties.co';\n\nconst checkResponse = (res) => {\n  if (res.ok) {\n    return res.json();\n  }\n  return Promise.reject(new Error(`Что-то пошло не так ${res.status}`));\n}\n\nexport const register = (email, password)=>{\n  return fetch(`${BASE_URL}/signup`,{\n    method: \"POST\",\n    headers:{\n      'Accept': 'application/json',\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify({\n      \"email\": email,\n      \"password\": password\n      })\n  }).then(checkResponse);\n}\n\nexport const login = (email, password)=>{\n  return fetch(`${BASE_URL}/signin`,{\n    method: \"POST\",\n    headers:{\n      \"Content-Type\":\"application/json\"\n    },\n    body: JSON.stringify({\n      \"email\": email,\n      \"password\": password\n    })\n  }).then(checkResponse)\n}\n\nexport const checkToken  = (jwt)=>{\n  return fetch(`${BASE_URL}/users/me`,{\n    method: \"GET\",\n    headers:{\n      \"Content-Type\":\"application/json\",\n      \"Authorization\" : `Bearer ${jwt}`\n    },\n  }).then(checkResponse);\n}\n","import React from 'react';\nimport api from '../utils/Api';\nimport Header from './Header';\nimport Footer from './Footer';\nimport Main from './Main';\nimport PopupWithForm from './PopupWithForm';\nimport AddCardPopup from './AddCardPopup';\nimport EditProfilePopup from './EditProfilePopup';\nimport AvatarPopup from './AvatarPopup';\nimport ImagePopup from './ImagePopup';\nimport { CurrentUserContext } from '../context/CurrentUserContext';\nimport Login from './Login';\nimport ProtectedRoute from './ProtectedRoute';\nimport Register from './Register';\nimport InfoToolTip from './InfoTooltip';\nimport { Route, Switch, useHistory, Redirect } from 'react-router-dom';\nimport * as auth from '../utils/Auth';\nimport '../index.css';\n\nfunction App() {\n  const [isEditProfilePopupOpen, setIsEditProfilePopupOpen] = React.useState(false);\n  const [isAddPlacePopupOpen, setIsAddPlacePopupOpen] = React.useState(false);\n  const [isEditAvatarPopupOpen, setIsEditAvatarPopupOpen] = React.useState(false);\n  const [isImagePopupOpen, setIsImagePopupOpen] = React.useState(false);\n  const [selectedCard, setSelectedCard] = React.useState({});\n  const [currentUser, setCurrentUser] = React.useState();\n  const [cards, setCards] = React.useState([]);\n  const history = useHistory();\n  const [email, setEmail] = React.useState(\"\")\n  const [isLoggedIn, setIsLoggedIn] = React.useState(false);\n  const [isRegSucces, setIsRegSucces] = React.useState(false);\n  const [isInfoPopupOpen,setIsInfoPopupOpen] = React.useState(false);\n\n  React.useEffect(() => {\n    api.getUserData()\n      .then(user => {\n        setCurrentUser(user);\n      })\n      .catch(err => {\n        console.log (`Ошибка: ${err}`)\n      });\n  }, []);\n\n  React.useEffect(() => {\n    api.getInitialCards()\n      .then(res =>{\n        setCards(res)\n      })\n      .catch(err => {\n        console.log(`Ошибка: ${err}`)\n      })\n  }, [])\n\n  React.useEffect(() => {\n    window.addEventListener('keydown', (e) => {\n      if (e.key === 'Escape') {\n        closeAllPopups();\n      }\n    })\n  },[]);\n\n  function overlayClick(evt) {\n    if (evt.target.classList.contains('popup')){\n      closeAllPopups()\n    }\n  }\n\n  function handleUpdateAvatar(link) {\n    api.updateAvatar(link)\n    .then(user => {\n      setCurrentUser(user);\n      closeAllPopups();\n    })\n    .catch(err => {\n      console.log (`Ошибка: ${err}`)\n    });\n  }\n\n  function handleUpdateUser(name, about) {\n    api.updateUserData(name, about)\n    .then((user) => {\n      setCurrentUser(user)\n      closeAllPopups();\n    })\n    .catch(err => {\n      console.log (`Ошибка: ${err}`)\n    });\n  }\n\n  function handleCardLike(card) {\n    const isLiked = card.likes.some(i => i._id === currentUser._id);\n    api.likeCardStatus(card._id, !isLiked)\n    .then((newCard) => {\n      const newCards = cards.map((c) => c._id === card._id ? newCard : c);\n      setCards(newCards);\n    })\n    .catch(err => {\n      console.log(`Ошибка: ${err}`)\n    })\n  }\n\n  function handleCardDelete(cardId) {\n    api.deleteCard(cardId)\n      .then(() => {\n        setCards(cards.filter((c) => c._id !== cardId));\n      })\n      .catch(err => {\n        console.log(`Ошибка: ${err}`)\n      })\n  }\n\n  function handleAddPlace(name, link) {\n    api.postCard(name, link)\n     .then((res) => {\n      setCards([res, ...cards]);\n      closeAllPopups();\n    })\n    .catch(err => {\n      console.log (`Ошибка: ${err}`)\n    });\n  }\n\n  React.useEffect(() => {\n    const jwt =localStorage.getItem(\"jwt\");\n    if (jwt){\n      auth.checkToken(jwt)\n      .then((res) => {\n        setIsLoggedIn(true)\n        setEmail(res.data.email)\n        history.push('/');\n      })\n      .catch(err => {\n        if (err.status === 401) {\n          console.log('401 — Токен не передан или передан не в том формате')\n        }\n        console.log('401 — Переданный токен некорректен')\n      })\n    }\n  },);\n\n  function handleRegSubmit(email,password){\n    auth.register(email,password)\n    .then(()=>{\n      setIsInfoPopupOpen(true);\n      setIsRegSucces(true);\n      history.push('/sign-in');\n    })\n    .catch(err=>{\n      if(err.status === 400){\n        console.log('Некорректно заполнено одно из полей ')\n      }\n      setIsInfoPopupOpen(true);\n      setIsRegSucces(false);\n    })\n  }\n\n  function handleLoginSubmit(email,password){\n    auth.login(email, password)\n    .then(res=>{\n      localStorage.setItem(\"jwt\", res.token)\n      setIsLoggedIn(true);\n      setEmail(email);\n      history.push(\"/\")\n    })\n    .catch((err)=>{\n      if(err.status === 400){\n        console.log(\"400 - не передано одно из полей\")\n      }\n      else if(err.status === 401){\n        console.log(\"401 - пользователь с email не найден \")\n      }\n      return console.log(\"Error: 500\")\n    })\n  }\n\n  function handleSignout(){\n    localStorage.removeItem('jwt');\n    setIsLoggedIn(false)\n    history.push('/sign-in');\n  }\n\n  function handelAddPlace(){\n    setIsAddPlacePopupOpen(true)\n  }\n\n  const handleEditAvatarClick = () => {\n    setIsEditAvatarPopupOpen(true)\n  };\n\n  const handleEditProfileClick = () => {\n    setIsEditProfilePopupOpen(true)\n  };\n\n  const closeAllPopups = () => {\n    setIsAddPlacePopupOpen(false);\n    setIsEditAvatarPopupOpen(false);\n    setIsEditProfilePopupOpen(false);\n    setIsImagePopupOpen(false);\n    setSelectedCard({});\n    setIsInfoPopupOpen(false);\n  }\n\n  const handleCardClick = (card) => {\n    setIsImagePopupOpen(true);\n    setSelectedCard(card)\n  }\n\n   return (\n    <div className=\"body\">\n      <CurrentUserContext.Provider value={currentUser}>\n        <Header email={email} onSignOut={handleSignout}/>\n        <Switch>\n          <ProtectedRoute exact path=\"/\"\n            component={Main}\n            isLoggedIn={isLoggedIn}\n            onEditProfile={handleEditProfileClick}\n            onAddPlace={handelAddPlace}\n            onEditAvatar={handleEditAvatarClick}\n            onCardClick={handleCardClick}\n            cards={cards}\n            onCardLike={handleCardLike}\n            onCardDelete={handleCardDelete}/>\n          <Route  path=\"/sign-in\">\n            <Login onSubmit={handleLoginSubmit}/>\n          </Route>\n          <Route  path=\"/sign-up\">\n            <Register onSubmit={handleRegSubmit}/>\n          </Route>\n          <Route path=\"/\">\n            {isLoggedIn ? <Redirect to=\"/\" /> : <Redirect to=\"/sign-in\" />}\n          </Route>\n        </Switch>\n        <Footer />\n        <PopupWithForm\n          name=\"delete\"\n          title='Вы уверены?'\n          buttonText='Удалить'\n          onClose={closeAllPopups}\n          overlay={overlayClick}/>\n        <InfoToolTip\n          isRegSucces={isRegSucces}\n          isOpen={isInfoPopupOpen}\n          onClose={closeAllPopups}/>\n        <AddCardPopup\n          isOpen={isAddPlacePopupOpen}\n          onClose={closeAllPopups}\n          overlay={overlayClick}\n          onAddPlace={handleAddPlace}/>\n        <EditProfilePopup\n          isOpen={isEditProfilePopupOpen}\n          onClose={closeAllPopups}\n          overlay={overlayClick}\n          onUpdateUser={handleUpdateUser}/>\n        <AvatarPopup\n          isOpen={isEditAvatarPopupOpen}\n          onClose={closeAllPopups}\n          overlay={overlayClick}\n          onUpdateAvatar={handleUpdateAvatar}/>\n        <ImagePopup\n          isOpen={isImagePopupOpen}\n          onClose={closeAllPopups}\n          card={selectedCard}\n          link={selectedCard.link}\n          name={selectedCard.name}\n          overlay={overlayClick}/>\n      </CurrentUserContext.Provider>\n    </div>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter } from 'react-router-dom';\nimport './index.css';\nimport App from './components/App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <BrowserRouter>\n      <App/>\n    </BrowserRouter>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}